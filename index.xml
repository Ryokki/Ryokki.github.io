<?xml-stylesheet href="/rss.xsl" type="text/xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ryokki Site</title>
    <link>https://ryokki.github.io/</link>
    <description>Recent content on Ryokki Site</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>This is a customized copyright.</copyright>
    <lastBuildDate>Wed, 19 Feb 2025 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://ryokki.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>å†…å­˜å±éšœçš„å‰ä¸–ä»Šç”Ÿ</title>
        <link>https://ryokki.github.io/posts/021.-%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/</link>
        <pubDate>Wed, 19 Feb 2025 00:00:00 +0000</pubDate>
        
        <guid>https://ryokki.github.io/posts/021.-%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/</guid>
        <description>Ryokki Site https://ryokki.github.io/posts/021.-%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/ -&lt;p&gt;å‚è€ƒ &lt;a href=&#34;https://www.hitzhangjie.pro/blog/2021-04-17-locks%E5%AE%9E%E7%8E%B0%E9%82%A3%E4%BA%9B%E4%B8%8D%E4%B8%BA%E4%BA%BA%E7%9F%A5%E7%9A%84%E6%95%85%E4%BA%8B/&#34;&gt;Lockså®ç°:èƒŒåä¸ä¸ºäººçŸ¥çš„æ•…äº‹ - MySpace&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»¥åŠä¸‹é¢ä¸¤ä¸ªè§†é¢‘å¾ˆæ¸…æ¥šè§£é‡Šäº†cpu cache,MESI, store buffer/invalidation queue, å†…å­˜å±éšœçš„å†å²æ¼”è¿›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã€é¢è¯•å®˜é—®æˆ‘MESIå¦‚ä½•ä¿è¯å†…å­˜ä¸€è‡´æ€§ï¼Œæˆ‘æŠŠè¿™ä¸ªåŠ¨ç”»ç”©ç»™ä»–ã€‘ &lt;a href=&#34;https://www.bilibili.com/video/BV1kD4y1T7XU/?share_source=copy_web&amp;amp;vd_source=6d5bbefdbb303f5c1b77aaeaa935d3de&#34;&gt;https://www.bilibili.com/video/BV1kD4y1T7XU/?share_source=copy_web&amp;amp;vd_source=6d5bbefdbb303f5c1b77aaeaa935d3de&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ã€ç¾å›¢ä¸€é¢é—®æˆ‘å†…å­˜å±éšœå’Œvolatileçš„å…³ç³»ï¼Œæˆ‘è¯´äº†20åˆ†é’Ÿã€‘ &lt;a href=&#34;https://www.bilibili.com/video/BV1cT411a7Sn/?share_source=copy_web&amp;amp;vd_source=6d5bbefdbb303f5c1b77aaeaa935d3de&#34;&gt;https://www.bilibili.com/video/BV1cT411a7Sn/?share_source=copy_web&amp;amp;vd_source=6d5bbefdbb303f5c1b77aaeaa935d3de&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://kkbabe-picgo.oss-cn-hangzhou.aliyuncs.com/img/20250219215829.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šä¸ªCPUæˆ–CPU Coreä¹‹é—´é€šè¿‡æ€»çº¿è¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;CPUé€šè¿‡æ€»çº¿ä¸ä¸»å­˜ï¼ˆmemoryï¼‰è¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªCPUéƒ½æœ‰è‡ªå·±çš„æœ¬åœ°cacheï¼Œé€šè¿‡cacheä¸€è‡´æ€§åè®®ï¼ˆå¦‚MESI/MESIFï¼‰ä¸å…¶ä»–CPU Coreç»´æŠ¤ä¸€ä¸ªä¸€è‡´çš„æ•°æ®è§†å›¾ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼•å…¥store-buffer&#34;&gt;å¼•å…¥store buffer&lt;/h3&gt;
&lt;p&gt;CPUå¯¹cachelineçš„ä¿®æ”¹ï¼Œè‹¥ç›´æ¥è½cacheï¼Œä¸€è‡´æ€§åè®®ä¼šå¼•å…¥ä¸å°çš„å¼€é”€ï¼ˆæ‰§è¡Œcacheä¸€è‡´æ€§åè®®ï¼‰ï¼ŒCPUä¼šstallæ‰§è¡Œçš„æŒ‡ä»¤ã€‚ä¸ºäº†æé«˜æŒ‡ä»¤ååï¼Œè¿™é‡Œå¼•å…¥äº†store bufferã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®æ›´æ–°ä¸ç›´æ¥å†™cachelineè€Œæ˜¯å…ˆå†™åˆ°store bufferï¼Œåé¢éœ€è¦æ—¶å†&lt;strong&gt;è½cache&lt;/strong&gt;å¹¶&lt;strong&gt;é€šçŸ¥å…¶ä»–cacheå¤±æ•ˆ&lt;/strong&gt;ï¼ˆæ‰§è¡Œcacheä¸€è‡´æ€§åè®®ï¼‰ï¼Œè¿™æ ·CPUå°±å¯ä»¥å‡å°‘stallç»§ç»­æ‰§è¡ŒæŒ‡ä»¤ï¼ˆstore bufferåˆ·æ–°è¿‡ç¨‹ä¸éœ€è¦cpuå‚ä¸ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://kkbabe-picgo.oss-cn-hangzhou.aliyuncs.com/img/cpu2.png&#34; alt=&#34;cpu2&#34;&gt;&lt;/p&gt;
&lt;p&gt;ğŸ’¡å•æ ¸æ—¶ä¿è¯äº†ä¸€è‡´æ€§&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;store bufferæ˜¯ä¸ªFIFOï¼ŒåŒä¸ªcpuä¸¤ä¸ªå†™æ“ä½œä¸€å®šæ˜¯é¡ºåºæ‰§è¡Œçš„&lt;/li&gt;
&lt;li&gt;åŒä¸ªcpuå…ˆå†™åè¯»ï¼Œä¸ä¼šå‡ºç°è¯»åˆ°æ—§æ•°æ®çš„æƒ…å†µï¼Œå› ä¸ºè¯»çš„æ—¶å€™ä¼šæ£€æŸ¥store bufferæ˜¯å¦æœ‰åŒä¸ªåœ°å€çš„å†™æ“ä½œ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å¼•å…¥invalidate-queue&#34;&gt;å¼•å…¥invalidate queue&lt;/h3&gt;
&lt;p&gt;CPU cacheæ›´æ–°cachelineåï¼Œé€šçŸ¥å…¶ä»–CPUæ›´æ–°cacheï¼Œéœ€é€šè¿‡cacheä¸€è‡´æ€§åè®®ï¼Œå¦‚MESI/MESIFæ¶ˆæ¯invalidateã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¸¸æ¥è¯´ï¼Œæ”¶åˆ°æ­¤é€šçŸ¥çš„CPUåº”ä»cacheä¸­å°†å¯¹åº”cachelineæ ‡è®°ä¸ºæ— æ•ˆï¼Œä½†æ˜¯å¦‚æœç«‹å³æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œçš„è¯ï¼ŒCPUä¼šé¢‘ç¹è¢«é˜»æ–­æ‰§è¡Œï¼Œæ‰€ä»¥CPUä¸­å¼•å…¥äº†invalidate queueï¼Œæ”¶åˆ°invalidateé€šçŸ¥åç¼“å­˜èµ·æ¥å¹¶ç«‹å³å›å¤ACKï¼Œä½†å»¶è¿Ÿå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆinvalidate queue åˆ·æ–°è¿‡ç¨‹ä¸éœ€è¦cpuå‚ä¸ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;å¼•å…¥çš„é—®é¢˜&#34;&gt;å¼•å…¥çš„é—®é¢˜&lt;/h3&gt;
&lt;p&gt;è¿™ä¹ˆè®¾è®¡å¼•å…¥çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;store bufferï¼šæœ¬åœ°cacheæ›´æ–°ä¸èƒ½ç«‹å³è¢«å…¶ä»–CPUæˆ–è€…CPU coreè§‚æµ‹åˆ°äº†ï¼Œå†™æ“ä½œå¯¹å¤–ä¸å¯è§ï¼›&lt;/li&gt;
&lt;li&gt;invalidate queueï¼šæœ¬åœ°cacheæ²¡æœ‰ç«‹å³æ›´æ–°æ•°æ®ï¼Œä¸Šå±‚åº”ç”¨çœ‹ä¸åˆ°å…¶ä»–CPUæ›´æ–°çš„æ•°æ®ï¼ˆå…¶å®å°±æ˜¯ç¬¬ä¸€ç‚¹ï¼Œå†™æ“ä½œå¯¹å¤–ä¸å¯è§ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¤„ç†å™¨æ‰§è¡Œæ“ä½œå˜åŒ–&#34;&gt;å¤„ç†å™¨æ‰§è¡Œæ“ä½œå˜åŒ–&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœæ²¡æœ‰store bufferã€invalidate queueï¼ŒMESIï¼Œcacheå¦‚ä½•å·¥ä½œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“åŒ…å«å˜é‡açš„cachelineï¼Œå…¶è¢«CPU 0å’ŒCPU 1å…±äº«ï¼Œå½“CPU 0æ›´æ–°è¯¥cachelineä¹‹åï¼Œä¼šå‘é€invalidateç»™CPU 1ï¼ŒCPU 1éšå³æŠŠå¯¹åº”çš„cachelineæ ‡è®°ä¸ºinvalidateï¼›&lt;/li&gt;
&lt;li&gt;å½“CPU 1ä¸‹æ¬¡è¯»å–å˜é‡açš„cachelineæ—¶ï¼Œå‘ç°æ ‡è®°ä¸ºäº†æ— æ•ˆï¼Œæ­¤æ—¶å‘å‡ºreadè¯·æ±‚ï¼ŒCPU 0è§‚æµ‹åˆ°è‡ªå·±è¿™è¾¹å¯¹åº”çš„cachelineæ˜¯modifiedçŠ¶æ€ï¼Œcachelineæ˜¯æœ€æ–°çš„ï¼Œæ­¤æ—¶ä¼šå°†å¯¹åº”cachelineæ•°æ®å‘é€ç»™CPU 1ï¼Œè¿™æ ·CPU 1å°±è§‚æµ‹åˆ°äº†æœ€æ–°çš„æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;CPU 0ä¸­cachelineä½•æ—¶å†™å›ä¸»å­˜ï¼Ÿå¯èƒ½æ˜¯è¢«æ·˜æ±°çš„æ—¶å€™ï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ«äººreadçš„æ—¶å€™ï¼Œè¿™ä¸ªæˆ‘ä»¬å…ˆä¸å…³å¿ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœå¼•å…¥äº†store bufferã€invalidate queueä¹‹åï¼Œåˆè¯¥å¦‚ä½•å·¥ä½œå‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿…é¡»è¦æœ‰åŠæ³•ï¼Œå°†è¯¥store bufferä¸­çš„æ›´æ–°ï¼Œé€šçŸ¥åˆ°å…¶ä»–CPUï¼Œè¿™å°±æ˜¯write barrierå¹²çš„äº‹æƒ…ã€‚å®ƒå°±æ˜¯æš‚åœCPU 0æ‰§è¡Œï¼Œå¹¶å°†CPU 0æŠŠstore bufferä¸­è®°å½•çš„ä¸€äº›æ›´æ–°åº”ç”¨åˆ°cacheä¸­ï¼Œæ­¤æ—¶ä¼šè§¦å‘cacheä¸€è‡´æ€§åè®®MESIé€šçŸ¥CPU 1 cacheline invalidateï¼›&lt;/li&gt;
&lt;li&gt;å¿…é¡»è¦æœ‰åŠæ³•ï¼Œå°†CPU 1ä¸­invalidate queueè®°å½•ä¸‹æ¥çš„invalidateå¯¹åº”çš„cachelineåŠæ—¶æ¸…ç†æ‰ï¼Œè¿™å°±æ˜¯read barrierå¹²çš„äº‹æƒ…ã€‚å®ƒå°±æ˜¯æš‚åœCPU 1æ‰§è¡Œï¼Œå°†å…¶invalidate queueä¸­çš„æ¯ä¸ªinvalidateè¯·æ±‚å¯¹åº”çš„cachelineå…¨éƒ¨æ ‡è®°ä¸ºæ— æ•ˆï¼Œä¸‹æ¬¡è¯»å–æ—¶ä»å†…å­˜æˆ–è€…CPU 0è¯»å–æœ€æ–°æ•°æ®ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å†…å­˜å±éšœ&#34;&gt;å†…å­˜å±éšœ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¿™é‡Œçš„è¯»å†™å±éšœè¦ä¾èµ–å¤„ç†å™¨æä¾›çš„å±éšœæŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;åœ¨å±éšœæŒ‡ä»¤ä¹‹ä¸Šï¼Œå†…æ ¸å¯ä»¥æŒ‰éœ€é€‰æ‹©ï¼Œå¦‚Linuxåœ¨x86å¹³å°é€‰æ‹©ç”¨ &lt;code&gt;lock; addl&lt;/code&gt;æ¥å®ç°è¯»å†™å±éšœ smp_mb/smp_rmb/smp_wmbï¼Œx86å…¶å®ä¹Ÿæä¾›äº†mfenceã€lfenceã€sfenceã€‚è‡³äºLinuxä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰æ‹©ï¼Œåº”è¯¥æ˜¯è·Ÿx86å®ç°æœ‰å…³ç³»ï¼Œä¸€æ¡æŒ‡ä»¤ &lt;code&gt;lock;addl&lt;/code&gt;åŒæ—¶å®ç°å…¨å±éšœ/è¯»å±éšœ/å†™å±éšœè¶³çŸ£ã€‚&lt;/li&gt;
&lt;li&gt;å…¶ä»–ç¼–ç¨‹è¯­è¨€å†…å­˜æ¨¡å‹ï¼Œé€šå¸¸ä¼šå®šä¹‰ä¸€äº›Happens-Beforeå…³ç³»ï¼Œè¿™é‡Œé¢å°±éšå«äº†å„ç§å±éšœçš„åº”ç”¨ã€‚åŸºäºå±éšœå®ç°çš„å„ç§åŒæ­¥åŸè¯­å¦‚mutexã€semaphoreç­‰å°±æ¯”è¾ƒå¸¸è§äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://kkbabe-picgo.oss-cn-hangzhou.aliyuncs.com/img/image-20250219224237737.png&#34; alt=&#34;image-20250219224237737&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†™æ“ä½œååŠ å…¥å†™å±éšœï¼Œå°±ä¼šåˆ·æ–°è¯¥cpuçš„æ‰€æœ‰store bufferï¼Œåˆ·åˆ°å…¶ä»–cpuçš„invaliate queue&lt;/li&gt;
&lt;li&gt;è¯»æ“ä½œå‰åŠ å…¥è¯»å±éšœï¼Œå°±ä¼šæ¶ˆè´¹å½“å‰cpuçš„æ‰€æœ‰invalidate&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;deepseek-r1å¯¹æ¼”è¿›å²çš„æ¢³ç†&#34;&gt;DeepSeek-R1å¯¹æ¼”è¿›å²çš„æ¢³ç†&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å¸®æˆ‘è¿™ä¸ªç¬”è®°åšä¸‹è¡¥å……ï¼Œä¾‹å¦‚å±•å¼€è¯´è¯´æ¼”è¿›çš„å†å²ï¼ˆç»“åˆæ—¶é—´ï¼‰ï¼Œæ›´å…·ä½“çš„ä¾‹å­ç­‰ç­‰

cpu-memoryå¾ˆæ…¢ï¼Œå¼•å…¥cache
ç”±äºæ¯ä¸ªcpuéƒ½æœ‰å„è‡ªçš„cacheï¼Œä¿®æ”¹æ—¶éœ€è¦ä¿è¯å…¶ä»–ç¼“å­˜å¤±æ•ˆï¼Œæ”¶åˆ°ackåæ‰èƒ½ç»§ç»­ä¿®æ”¹
å¼•å…¥ä¸¤ä¸ªé˜Ÿåˆ—
Store Bufferï¼šç”¨äºæå‡å†™æ“ä½œçš„æ€§èƒ½ã€‚æ›´æ–°å†…å­˜æ—¶ï¼Œç›´æ¥æ‰”åˆ°bufferä¸­ï¼Œå¼‚æ­¥æ›´æ–°ã€‚bufferæ‰§è¡Œæ›´æ–°æ—¶ï¼Œä¹Ÿä¸€æ ·æ˜¯æ”¶åˆ°å…¶ä»–cpuçš„ç¼“å­˜å¤±æ•ˆackåæ‰èƒ½ä¿®æ”¹ã€ç®€è€Œè¨€ä¹‹ï¼ŒStore Buffer å°±åƒä¸€ä¸ª â€œå†™æ“ä½œç¼“å†²åŒºâ€ï¼Œè®© CPU å¯ä»¥ â€œå…ˆå†™å…ˆèµ°â€ï¼Œä»è€Œé¿å…å†™æ“ä½œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ã€‘
Invalid Queue: Invalidation Queue çš„ä½œç”¨å°±æ˜¯å¼‚æ­¥åœ°æ¥æ”¶å’Œå¤„ç†è¿™äº›æ¥è‡ªå…¶ä»– CPU Core çš„ Invalidate Requestã€‚ å½“ CPU Core (ä¾‹å¦‚ CPU1) æ”¶åˆ°æ¥è‡ª CPU0 çš„ Invalidate Request æ—¶ï¼Œå®ƒä¸ä¼šç«‹å³æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå»åŒæ­¥å¤„ç†ç¼“å­˜å¤±æ•ˆã€‚ ç›¸åï¼Œå®ƒä¼šå°†æ”¶åˆ°çš„ Invalidate Request å…ˆæ”¾å…¥ Invalidation Queue ä¸­æ’é˜Ÿã€‚ CPU Core å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„æŒ‡ä»¤ï¼Œè€Œ Invalidation Queue ä¼šåœ¨ åå°å¼‚æ­¥åœ° ä»é˜Ÿåˆ—ä¸­å–å‡º Invalidate Requestï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„ç¼“å­˜å¤±æ•ˆæ“ä½œ (ä¾‹å¦‚ï¼Œæ ‡è®° Cache Line ä¸º Invalid)ã€‚ã€ç®€è€Œè¨€ä¹‹ï¼ŒInvalidation Queue å°±åƒä¸€ä¸ª â€œå¤±æ•ˆè¯·æ±‚ç¼“å†²åŒºâ€ï¼Œè®© CPU å¯ä»¥å¼‚æ­¥åœ°å¤„ç†æ¥è‡ªå…¶ä»– Core çš„å¤±æ•ˆè¯·æ±‚ï¼Œé¿å…å› ç­‰å¾…å¤±æ•ˆå¤„ç†è€Œé˜»å¡ CPU çš„æ­£å¸¸æ‰§è¡Œã€‚ã€‘


æœ€åçš„æ€»ç»“å¾ˆå¥½ï¼šcache-&amp;gt;mesi-&amp;gt;two queue-&amp;gt;barrierçš„æ¼”è¿›
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¥½çš„ï¼æˆ‘å°†ç»“åˆæ—¶é—´çº¿ã€å…·ä½“æ¡ˆä¾‹å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Œè¡¥å……å¹¶æ‰©å±•æ‚¨çš„ç¬”è®°å†…å®¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;cpu-cache-ä¸å†…å­˜ä¸€è‡´æ€§æ¼”è¿›å²&#34;&gt;&lt;strong&gt;CPU Cache ä¸å†…å­˜ä¸€è‡´æ€§æ¼”è¿›å²&lt;/strong&gt;&lt;/h3&gt;
&lt;h4 id=&#34;1-å•æ ¸æ—¶ä»£ç®€å•ç¼“å­˜1980så‰&#34;&gt;&lt;strong&gt;1. å•æ ¸æ—¶ä»£ï¼šç®€å•ç¼“å­˜ï¼ˆ1980så‰ï¼‰&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èƒŒæ™¯&lt;/strong&gt;ï¼šCPU ä¸»é¢‘å¿«é€Ÿæå‡ï¼ˆMHz â†’ GHzï¼‰ï¼Œä½†å†…å­˜é€Ÿåº¦ä»…å¢é•¿ 10 å€ï¼Œå½¢æˆ &amp;ldquo;Memory Wall&amp;rdquo;ï¼ˆå†…å­˜å¢™ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—©æœŸæ–¹æ¡ˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›´å†™ï¼ˆWrite-Throughï¼‰&lt;/strong&gt;ï¼šæ¯æ¬¡å†™æ“ä½œåŒæ—¶æ›´æ–°ç¼“å­˜å’Œå†…å­˜ï¼Œç®€å•ä½†æ€§èƒ½å·®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›å†™ï¼ˆWrite-Backï¼‰&lt;/strong&gt;ï¼šä»…æ›´æ–°ç¼“å­˜ï¼Œæ ‡è®°è„ä½ï¼ˆDirty Bitï¼‰ï¼Œæ·˜æ±°æ—¶å†™å›å†…å­˜ï¼Œæå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼šIntel 80386ï¼ˆ1985ï¼‰é¦–æ¬¡å¼•å…¥ç‰‡ä¸Šç¼“å­˜ï¼ˆ8KBï¼‰ï¼Œé‡‡ç”¨ç®€å•å›å†™ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;2-å¤šæ ¸æ—¶ä»£mesi-åè®®1990s&#34;&gt;&lt;strong&gt;2. å¤šæ ¸æ—¶ä»£ï¼šMESI åè®®ï¼ˆ1990sï¼‰&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šå¤šæ ¸ CPU å„è‡ªç¼“å­˜åŒä¸€å†…å­˜åœ°å€æ—¶ï¼Œå¦‚ä½•ä¿è¯ä¸€è‡´æ€§ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MESI åè®®&lt;/strong&gt;ï¼ˆ1990 å¹´æå‡ºï¼‰ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€æœº&lt;/strong&gt;ï¼šModifiedï¼ˆç‹¬å ä¿®æ”¹ï¼‰ã€Exclusiveï¼ˆç‹¬å æœªä¿®æ”¹ï¼‰ã€Sharedï¼ˆå…±äº«ï¼‰ã€Invalidï¼ˆå¤±æ•ˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€»çº¿å—…æ¢ï¼ˆBus Snoopingï¼‰&lt;/strong&gt;ï¼šé€šè¿‡ç›‘å¬æ€»çº¿æ¶ˆæ¯ï¼ˆå¦‚ &lt;code&gt;Read&lt;/code&gt;/&lt;code&gt;Invalidate&lt;/code&gt;ï¼‰ç»´æŠ¤çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;ï¼šæ¯æ¬¡å†™æ“ä½œéœ€å¹¿æ’­å¤±æ•ˆè¯·æ±‚ï¼Œç­‰å¾…æ‰€æœ‰ CPU ç¡®è®¤ï¼ˆACKï¼‰ï¼Œå¯¼è‡´å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Intel Pentium Proï¼ˆ1995ï¼‰&lt;/strong&gt;ï¼šé¦–æ¬¡å®ç° MESIï¼Œæ”¯æŒå¤šæ ¸å…±äº« L2 ç¼“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AMD K6ï¼ˆ1997ï¼‰&lt;/strong&gt;ï¼šé‡‡ç”¨ MOESI åè®®ï¼ˆå¢åŠ  Owned çŠ¶æ€ï¼‰ï¼Œä¼˜åŒ–å…±äº«æ•°æ®åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;3-å¼‚æ­¥ä¼˜åŒ–store-buffer-ä¸-invalidation-queue2000s&#34;&gt;&lt;strong&gt;3. å¼‚æ­¥ä¼˜åŒ–ï¼šStore Buffer ä¸ Invalidation Queueï¼ˆ2000sï¼‰&lt;/strong&gt;&lt;/h4&gt;
&lt;h5 id=&#34;31-store-buffer&#34;&gt;&lt;strong&gt;3.1 Store Buffer&lt;/strong&gt;&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šMESI è¦æ±‚å†™æ“ä½œå¿…é¡»ç­‰å¾…æ‰€æœ‰ ACKï¼Œå¯¼è‡´ CPU åœé¡¿ï¼ˆStallï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¼•å…¥ Store Bufferï¼ˆå†™ç¼“å†²åŒºï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;CPU å†™å…¥æ—¶ï¼Œæ•°æ®æš‚å­˜åˆ° Store Bufferï¼Œç»§ç»­æ‰§è¡Œåç»­æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;åå°å¼‚æ­¥å‘é€ &lt;code&gt;Invalidate&lt;/code&gt; è¯·æ±‚ï¼Œç­‰å¾…å…¶ä»– CPU çš„ ACKã€‚&lt;/li&gt;
&lt;li&gt;æ”¶åˆ°æ‰€æœ‰ ACK åï¼Œæ•°æ®ä» Store Buffer æäº¤åˆ°ç¼“å­˜ï¼ˆCache Lineï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ•ˆæœ&lt;/strong&gt;ï¼šå†™æ“ä½œå»¶è¿Ÿä» 100+ å‘¨æœŸé™ä½åˆ° 10 å‘¨æœŸå†…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰¯ä½œç”¨&lt;/strong&gt;ï¼šå¯¼è‡´&lt;strong&gt;å†…å­˜ä¹±åº&lt;/strong&gt;ï¼ˆMemory Reorderingï¼‰ï¼Œéœ€å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Intel NetBurstï¼ˆ2000ï¼‰&lt;/strong&gt;ï¼šé¦–æ¬¡å¼•å…¥æ·±åº¦ Store Bufferï¼ˆ20+ entriesï¼‰ï¼Œæå‡ Pentium 4 ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ARMv7ï¼ˆ2005ï¼‰&lt;/strong&gt;ï¼šå…è®¸å¼±ä¸€è‡´æ€§æ¨¡å‹ï¼ˆWeak Memory Modelï¼‰ï¼Œä¾èµ–æ˜¾å¼å±éšœæŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;32-invalidation-queue&#34;&gt;&lt;strong&gt;3.2 Invalidation Queue&lt;/strong&gt;&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šæ¥æ”¶ &lt;code&gt;Invalidate&lt;/code&gt; è¯·æ±‚çš„ CPU è‹¥åŒæ­¥å¤„ç†ï¼Œå¯èƒ½å› ç¹å¿™å»¶è¿Ÿ ACKã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¼•å…¥ Invalidation Queueï¼ˆå¤±æ•ˆé˜Ÿåˆ—ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;æ”¶åˆ° &lt;code&gt;Invalidate&lt;/code&gt; è¯·æ±‚æ—¶ï¼Œç›´æ¥æ”¾å…¥é˜Ÿåˆ—å¹¶ç«‹å³å›å¤ ACKã€‚&lt;/li&gt;
&lt;li&gt;åå°å¼‚æ­¥å¤„ç†é˜Ÿåˆ—ï¼Œå°†å¯¹åº” Cache Line æ ‡è®°ä¸º Invalidã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ•ˆæœ&lt;/strong&gt;ï¼šå‡å°‘ ACK å»¶è¿Ÿï¼Œæå‡æ•´ä½“ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰¯ä½œç”¨&lt;/strong&gt;ï¼šå¯èƒ½å¯¼è‡´ CPU çŸ­æš‚è¯»åˆ°æ—§æ•°æ®ï¼ˆéœ€å±éšœå¼ºåˆ¶æ¸…ç©ºé˜Ÿåˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IBM POWER4ï¼ˆ2001ï¼‰&lt;/strong&gt;ï¼šé¦–æ¬¡å®ç°å¤šçº§ Invalidation Queueï¼Œæ”¯æŒ 64 æ ¸ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AMD Zenï¼ˆ2017ï¼‰&lt;/strong&gt;ï¼šé‡‡ç”¨åˆ†å¸ƒå¼å¤±æ•ˆé˜Ÿåˆ—ï¼Œä¼˜åŒ–å¤š CCD æ¶æ„å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;4-å†…å­˜å±éšœmemory-barrier-2000&#34;&gt;&lt;strong&gt;4. å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰ (2000)&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šStore Buffer å’Œ Invalidation Queue å¯¼è‡´æŒ‡ä»¤é‡æ’ï¼Œç ´åç¨‹åºé¡ºåºä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šæ’å…¥å†…å­˜å±éšœæŒ‡ä»¤ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†™å±éšœï¼ˆStore Barrierï¼‰&lt;/strong&gt;ï¼šæ¸…ç©º Store Bufferï¼Œç¡®ä¿å±éšœå‰çš„å†™æ“ä½œå¯¹å…¶ä»– CPU å¯è§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å±éšœï¼ˆLoad Barrierï¼‰&lt;/strong&gt;ï¼šæ¸…ç©º Invalidation Queueï¼Œç¡®ä¿è¯»åˆ°æœ€æ–°æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±éšœï¼ˆFull Barrierï¼‰&lt;/strong&gt;ï¼šåŒæ—¶æ¸…ç©º Store Buffer å’Œ Invalidation Queueã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Linux å†…æ ¸ï¼ˆ2005+ï¼‰&lt;/strong&gt;ï¼š&lt;code&gt;smp_wmb()&lt;/code&gt;ï¼ˆå†™å±éšœï¼‰ã€&lt;code&gt;smp_rmb()&lt;/code&gt;ï¼ˆè¯»å±éšœï¼‰ç”¨äºåŒæ­¥é”ã€RCU ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Java volatileï¼ˆ2004ï¼‰&lt;/strong&gt;ï¼šJVM é€šè¿‡æ’å…¥ &lt;code&gt;lock addl $0x0, (%esp)&lt;/code&gt; å®ç°å±éšœè¯­ä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;å…¸å‹é—®é¢˜ä¸æ¡ˆä¾‹åˆ†æ&#34;&gt;&lt;strong&gt;å…¸å‹é—®é¢˜ä¸æ¡ˆä¾‹åˆ†æ&lt;/strong&gt;&lt;/h3&gt;
&lt;h4 id=&#34;1-å¯è§æ€§é—®é¢˜visibility&#34;&gt;&lt;strong&gt;1. å¯è§æ€§é—®é¢˜ï¼ˆVisibilityï¼‰&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šåŒçº¿ç¨‹å¾ªç¯æ£€æŸ¥ &lt;code&gt;flag&lt;/code&gt; å˜é‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// çº¿ç¨‹ A
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;data = &lt;span style=&#34;color:#b452cd&#34;&gt;42&lt;/span&gt;;          &lt;span style=&#34;color:#228b22&#34;&gt;// å†™å…¥ Store Bufferï¼Œæœªæäº¤
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;flag = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;           &lt;span style=&#34;color:#228b22&#34;&gt;// Store Buffer å¯èƒ½å…ˆäº data æäº¤
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// çº¿ç¨‹ B
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (flag != &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);  &lt;span style=&#34;color:#228b22&#34;&gt;// çœ‹åˆ° flag=1 ä½† data å¯èƒ½ä»æ˜¯æ—§å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008b45&#34;&gt;print&lt;/span&gt;(data);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;data=42&lt;/code&gt; åæ’å…¥å†™å±éšœï¼Œåœ¨ &lt;code&gt;while&lt;/code&gt; å‰æ’å…¥è¯»å±éšœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-ä¹±åºé—®é¢˜reordering&#34;&gt;&lt;strong&gt;2. ä¹±åºé—®é¢˜ï¼ˆReorderingï¼‰&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå•æ ¸æŒ‡ä»¤é‡æ’ï¼ˆAlpha å¤„ç†å™¨è‘—åæ¡ˆä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-asm&#34; data-lang=&#34;asm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008b45&#34;&gt;STORE&lt;/span&gt; &lt;span style=&#34;color:#00688b&#34;&gt;A&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;           &lt;span style=&#34;color:#228b22&#34;&gt;; å­˜å…¥ Store Buffer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#008b45&#34;&gt;LOAD&lt;/span&gt; &lt;span style=&#34;color:#00688b&#34;&gt;B&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;            &lt;span style=&#34;color:#228b22&#34;&gt;; B å·²åœ¨ç¼“å­˜ä¸­ï¼Œç«‹å³è¯»åˆ° 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å…¶ä»– CPU å¯èƒ½çœ‹åˆ° &lt;code&gt;B=0&lt;/code&gt; å…ˆäº &lt;code&gt;A=1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;mfence&lt;/code&gt; æŒ‡ä»¤ç¦æ­¢é‡æ’ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;æ¼”è¿›æ€»ç»“&#34;&gt;&lt;strong&gt;æ¼”è¿›æ€»ç»“&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å•æ ¸ç¼“å­˜ â†’ MESI åè®® â†’ Store Buffer â†’ Invalidation Queue â†’ å†…å­˜å±éšœ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šæ¯ä¸€æ­¥éƒ½é€šè¿‡å¼‚æ­¥åŒ–ï¼ˆAsynchronyï¼‰æå‡ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚åº¦è½¬ç§»&lt;/strong&gt;ï¼šç¡¬ä»¶ä¼˜åŒ–å¯¼è‡´è½¯ä»¶éœ€å¤„ç†å¯è§æ€§å’Œé¡ºåºé—®é¢˜ï¼Œå‚¬ç”Ÿå¹¶å‘åŸè¯­ï¼ˆé”ã€åŸå­å˜é‡ã€RCUï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;å»¶ä¼¸æ–¹å‘&#34;&gt;&lt;strong&gt;å»¶ä¼¸æ–¹å‘&lt;/strong&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£æ‰©å±•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MOESI&lt;/strong&gt;ï¼šAMD æå‡ºçš„åè®®ï¼Œå…è®¸ç¼“å­˜ç›´æ¥å…±äº«è„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Directory-Based åè®®&lt;/strong&gt;ï¼šNUMA æ¶æ„ï¼ˆå¦‚ EPYCï¼‰ç”¨ç›®å½•é›†ä¸­ç®¡ç†ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥è¶‹åŠ¿&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡…å…‰äº’è¿&lt;/strong&gt;ï¼šç”¨å…‰ä¿¡å·åŠ é€Ÿä¸€è‡´æ€§æ¶ˆæ¯ä¼ é€’ï¼ˆå¦‚ Intel çš„é›†æˆå…‰å­å­¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ„ä¸€è‡´æ€§&lt;/strong&gt;ï¼šGPU/CPU ç»Ÿä¸€å†…å­˜ï¼ˆå¦‚ NVIDIA Hopper çš„ NVLink-C2Cï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¡¥å……èƒ½è®©çŸ¥è¯†ç»“æ„æ›´å®Œæ•´ï¼å¦‚æœéœ€è¦è¿›ä¸€æ­¥å±•å¼€æŸä¸ªç‚¹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚&lt;/p&gt;
- https://ryokki.github.io/posts/021.-%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/ - This is a customized copyright.</description>
        </item>
    
    
  </channel>
</rss> 